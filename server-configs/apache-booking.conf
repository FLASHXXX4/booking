# Apache Virtual Host Configuration for Laravel Hotel Booking System
# Place this file in: /etc/apache2/sites-available/booking.conf

<VirtualHost *:80>
    ServerName yourdomain.com
    ServerAlias www.yourdomain.com
    
    DocumentRoot /var/www/booking/public
    
    <Directory /var/www/booking/public>
        AllowOverride All
        Require all granted
        Options -Indexes +FollowSymLinks
    </Directory>
    
    # Security Headers
    Header always set X-Content-Type-Options "nosniff"
    Header always set X-Frame-Options "SAMEORIGIN"
    Header always set X-XSS-Protection "1; mode=block"
    
    # Logging
    ErrorLog ${APACHE_LOG_DIR}/booking_error.log
    CustomLog ${APACHE_LOG_DIR}/booking_access.log combined
    
    # PHP Configuration
    <FilesMatch \.php$>
        SetHandler "proxy:unix:/var/run/php/php8.2-fpm.sock|fcgi://localhost"
    </FilesMatch>
</VirtualHost>

# HTTPS Configuration (after SSL certificate)
# Uncomment and modify after running certbot

# <VirtualHost *:443>
#     ServerName yourdomain.com
#     ServerAlias www.yourdomain.com
#     
#     DocumentRoot /var/www/booking/public
#     
#     SSLEngine on
#     SSLCertificateFile /etc/letsencrypt/live/yourdomain.com/fullchain.pem
#     SSLCertificateKeyFile /etc/letsencrypt/live/yourdomain.com/privkey.pem
#     
#     <Directory /var/www/booking/public>
#         AllowOverride All
#         Require all granted
#         Options -Indexes +FollowSymLinks
#     </Directory>
#     
#     Header always set X-Content-Type-Options "nosniff"
#     Header always set X-Frame-Options "SAMEORIGIN"
#     Header always set X-XSS-Protection "1; mode=block"
#     
#     ErrorLog ${APACHE_LOG_DIR}/booking_ssl_error.log
#     CustomLog ${APACHE_LOG_DIR}/booking_ssl_access.log combined
# </VirtualHost>

